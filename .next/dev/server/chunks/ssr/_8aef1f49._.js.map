{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/lib/firebase/thirdspace.ts"],"sourcesContent":["import { collection, addDoc, getDocs, query, orderBy, serverTimestamp, doc, getDoc, onSnapshot, where, updateDoc } from \"firebase/firestore\"\r\nimport { db } from \"./config\"\r\n\r\nexport interface Post {\r\n  id?: string\r\n  content: string\r\n  userId: string\r\n  createdAt: any\r\n  isAnonymous: boolean\r\n  alias: string\r\n  likes: number\r\n}\r\n\r\nexport interface SecureChat {\r\n  id?: string\r\n  postId: string\r\n  postContent: string\r\n  participants: string[] // [opUserId, peerUserId]\r\n  createdAt: any\r\n  lastMessage?: string\r\n  lastMessageTimestamp?: any\r\n}\r\n\r\nexport interface SecureMessage {\r\n  id?: string\r\n  senderId: string\r\n  content: string\r\n  createdAt: any\r\n}\r\n\r\nconst ADJECTIVES = [\"Neon\", \"Silent\", \"Hidden\", \"Cosmic\", \"Urban\", \"Digital\", \"Quiet\", \"Misty\", \"Solar\", \"Lunar\"]\r\nconst NOUNS = [\"Tiger\", \"Owl\", \"Ghost\", \"Walker\", \"Dreamer\", \"Echo\", \"Shadow\", \"Fox\", \"Phoenix\", \"Voyager\"]\r\n\r\nfunction generateAlias(): string {\r\n  const adj = ADJECTIVES[Math.floor(Math.random() * ADJECTIVES.length)]\r\n  const noun = NOUNS[Math.floor(Math.random() * NOUNS.length)]\r\n  return `${adj} ${noun}`\r\n}\r\n\r\nexport async function createPost(content: string, userId: string): Promise<string> {\r\n  if (!content.trim()) {\r\n    throw new Error(\"Content cannot be empty\")\r\n  }\r\n\r\n  const post: Omit<Post, \"id\"> = {\r\n    content: content.trim(),\r\n    userId,\r\n    createdAt: serverTimestamp(),\r\n    isAnonymous: true,\r\n    alias: generateAlias(),\r\n    likes: 0\r\n  }\r\n\r\n  const docRef = await addDoc(collection(db, \"community_posts\"), post)\r\n  return docRef.id\r\n}\r\n\r\nexport async function getPosts(): Promise<Post[]> {\r\n  const q = query(collection(db, \"community_posts\"), orderBy(\"createdAt\", \"desc\"))\r\n  \r\n  const querySnapshot = await getDocs(q)\r\n  const posts: Post[] = []\r\n\r\n  querySnapshot.forEach((doc) => {\r\n    const data = doc.data()\r\n    posts.push({\r\n      id: doc.id,\r\n      ...data,\r\n      // Handle timestamp conversion if needed, though Firestore timestamps usually work well with .toDate()\r\n      createdAt: data.createdAt?.toDate ? data.createdAt.toDate() : new Date()\r\n    } as Post)\r\n  })\r\n\r\n  return posts\r\n}\r\n\r\n// --- Secure Chat Functions ---\r\n\r\nexport async function createSecureChat(postId: string, postContent: string, opUserId: string, peerUserId: string): Promise<string> {\r\n  // Check if a chat already exists between these two for this post?\r\n  // For simplicity, we'll just create a new one for now, or we could query.\r\n  // Let's query to prevent duplicates.\r\n  const q = query(\r\n    collection(db, \"secure_chats\"), \r\n    where(\"postId\", \"==\", postId),\r\n    where(\"participants\", \"array-contains\", peerUserId)\r\n  );\r\n  \r\n  const snapshot = await getDocs(q);\r\n  // Filter client-side for exact match of participants if needed, but array-contains is usually enough for 1:1 if we check the other participant.\r\n  // Actually, since we want a private chat between peer and OP, we should check if one exists.\r\n  \r\n  for (const doc of snapshot.docs) {\r\n    const data = doc.data() as SecureChat;\r\n    if (data.participants.includes(opUserId) && data.participants.includes(peerUserId)) {\r\n      return doc.id;\r\n    }\r\n  }\r\n\r\n  const chat: Omit<SecureChat, \"id\"> = {\r\n    postId,\r\n    postContent,\r\n    participants: [opUserId, peerUserId],\r\n    createdAt: serverTimestamp()\r\n  }\r\n\r\n  const docRef = await addDoc(collection(db, \"secure_chats\"), chat)\r\n  return docRef.id\r\n}\r\n\r\nexport async function getSecureChat(chatId: string): Promise<SecureChat | null> {\r\n  const docRef = doc(db, \"secure_chats\", chatId)\r\n  const docSnap = await getDoc(docRef)\r\n  \r\n  if (docSnap.exists()) {\r\n    return { id: docSnap.id, ...docSnap.data() } as SecureChat\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function sendMessage(chatId: string, senderId: string, content: string) {\r\n  if (!content.trim()) return;\r\n\r\n  const message: Omit<SecureMessage, \"id\"> = {\r\n    senderId,\r\n    content: content.trim(),\r\n    createdAt: serverTimestamp()\r\n  }\r\n\r\n  await addDoc(collection(db, \"secure_chats\", chatId, \"messages\"), message)\r\n  \r\n  // Update last message in chat doc\r\n  await updateDoc(doc(db, \"secure_chats\", chatId), {\r\n    lastMessage: content.trim(),\r\n    lastMessageTimestamp: serverTimestamp()\r\n  })\r\n}\r\n\r\nexport function subscribeToMessages(chatId: string, callback: (messages: SecureMessage[]) => void) {\r\n  const q = query(collection(db, \"secure_chats\", chatId, \"messages\"), orderBy(\"createdAt\", \"asc\"))\r\n  \r\n  return onSnapshot(q, (snapshot) => {\r\n    const messages: SecureMessage[] = []\r\n    snapshot.forEach((doc) => {\r\n      messages.push({ id: doc.id, ...doc.data() } as SecureMessage)\r\n    })\r\n    callback(messages)\r\n  }, (error) => {\r\n    console.error(\"Error subscribing to messages:\", error)\r\n  })\r\n}\r\n\r\nexport async function getUserChats(userId: string): Promise<SecureChat[]> {\r\n  // Query without sorting to avoid composite index requirement\r\n  const q = query(\r\n    collection(db, \"secure_chats\"), \r\n    where(\"participants\", \"array-contains\", userId)\r\n  );\r\n  \r\n  const snapshot = await getDocs(q);\r\n  const chats: SecureChat[] = [];\r\n  \r\n  snapshot.forEach((doc) => {\r\n    chats.push({ id: doc.id, ...doc.data() } as SecureChat)\r\n  });\r\n  \r\n  // Sort client-side\r\n  return chats.sort((a, b) => {\r\n    const timeA = a.createdAt?.seconds || 0;\r\n    const timeB = b.createdAt?.seconds || 0;\r\n    return timeB - timeA;\r\n  });\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Image>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Image\r\n    ref={ref}\r\n    className={cn(\"aspect-square h-full w-full\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Fallback\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,mNAAgB,CAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,OAAO,WAAW,GAAG,0KAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,+BAA+B;QAC5C,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,8KAAwB;QACvB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,wEACA;QAED,GAAG,KAAK;;;;;;AAGb,eAAe,WAAW,GAAG,8KAAwB,CAAC,WAAW"}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/components/thirdspace/post-card.tsx"],"sourcesContent":["import { Card, CardContent, CardHeader } from \"@/components/ui/card\"\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Heart, MessageCircle, Share2, MessageSquareLock } from \"lucide-react\"\r\nimport type { Post } from \"@/lib/firebase/thirdspace\"\r\nimport { createSecureChat } from \"@/lib/firebase/thirdspace\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useState } from \"react\"\r\n\r\ninterface PostCardProps {\r\n  post: Post\r\n  currentUserId: string\r\n}\r\n\r\nexport function PostCard({ post, currentUserId }: PostCardProps) {\r\n  const router = useRouter()\r\n  const [isCreatingChat, setIsCreatingChat] = useState(false)\r\n\r\n  // Generate a consistent color based on the alias for the avatar background\r\n  const getAvatarColor = (name: string) => {\r\n    const colors = [\r\n      \"bg-red-500\", \"bg-orange-500\", \"bg-amber-500\", \"bg-yellow-500\", \r\n      \"bg-lime-500\", \"bg-green-500\", \"bg-emerald-500\", \"bg-teal-500\", \r\n      \"bg-cyan-500\", \"bg-sky-500\", \"bg-blue-500\", \"bg-indigo-500\", \r\n      \"bg-violet-500\", \"bg-purple-500\", \"bg-fuchsia-500\", \"bg-pink-500\", \r\n      \"bg-rose-500\"\r\n    ]\r\n    let hash = 0\r\n    for (let i = 0; i < name.length; i++) {\r\n      hash = name.charCodeAt(i) + ((hash << 5) - hash)\r\n    }\r\n    return colors[Math.abs(hash) % colors.length]\r\n  }\r\n\r\n  const handleDiscuss = async () => {\r\n    if (!currentUserId || isCreatingChat) return\r\n    \r\n    // Don't allow chatting with yourself\r\n    if (post.userId === currentUserId) return\r\n\r\n    setIsCreatingChat(true)\r\n    try {\r\n      const chatId = await createSecureChat(post.id!, post.content, post.userId, currentUserId)\r\n      router.push(`/thirdspace/chat/${chatId}`)\r\n    } catch (error) {\r\n      console.error(\"Failed to start chat\", error)\r\n      setIsCreatingChat(false)\r\n    }\r\n  }\r\n\r\n  const avatarColor = getAvatarColor(post.alias)\r\n  const initials = post.alias.split(\" \").map(n => n[0]).join(\"\")\r\n\r\n  return (\r\n    <Card className=\"overflow-hidden\">\r\n      <CardHeader className=\"flex flex-row items-center gap-4 p-4 pb-2\">\r\n        <Avatar className=\"h-10 w-10 border-2 border-background\">\r\n          <AvatarFallback className={`${avatarColor} text-white font-bold`}>\r\n            {initials}\r\n          </AvatarFallback>\r\n        </Avatar>\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"font-semibold text-sm\">{post.alias}</span>\r\n          <span className=\"text-xs text-muted-foreground\">\r\n            {post.createdAt instanceof Date ? post.createdAt.toLocaleDateString() : \"Just now\"}\r\n          </span>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"p-4 pt-2 space-y-4\">\r\n        <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{post.content}</p>\r\n        \r\n        <div className=\"flex items-center gap-4 pt-2\">\r\n          <Button variant=\"ghost\" size=\"sm\" className=\"text-muted-foreground hover:text-red-500 px-2\">\r\n            <Heart className=\"h-4 w-4 mr-1.5\" />\r\n            <span className=\"text-xs\">{post.likes}</span>\r\n          </Button>\r\n          \r\n          {post.userId !== currentUserId && (\r\n            <Button \r\n              variant=\"ghost\" \r\n              size=\"sm\" \r\n              className=\"text-muted-foreground hover:text-primary px-2\"\r\n              onClick={handleDiscuss}\r\n              disabled={isCreatingChat}\r\n            >\r\n              <MessageSquareLock className=\"h-4 w-4 mr-1.5\" />\r\n              <span className=\"text-xs\">{isCreatingChat ? \"Opening...\" : \"Discuss Privately\"}</span>\r\n            </Button>\r\n          )}\r\n\r\n          <Button variant=\"ghost\" size=\"sm\" className=\"text-muted-foreground hover:text-primary px-2 ml-auto\">\r\n            <Share2 className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;;;;;;;;;AAOO,SAAS,SAAS,EAAE,IAAI,EAAE,aAAa,EAAiB;IAC7D,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,2EAA2E;IAC3E,MAAM,iBAAiB,CAAC;QACtB,MAAM,SAAS;YACb;YAAc;YAAiB;YAAgB;YAC/C;YAAe;YAAgB;YAAkB;YACjD;YAAe;YAAc;YAAe;YAC5C;YAAiB;YAAiB;YAAkB;YACpD;SACD;QACD,IAAI,OAAO;QACX,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,IAAK;YACpC,OAAO,KAAK,UAAU,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI;QACjD;QACA,OAAO,MAAM,CAAC,KAAK,GAAG,CAAC,QAAQ,OAAO,MAAM,CAAC;IAC/C;IAEA,MAAM,gBAAgB;QACpB,IAAI,CAAC,iBAAiB,gBAAgB;QAEtC,qCAAqC;QACrC,IAAI,KAAK,MAAM,KAAK,eAAe;QAEnC,kBAAkB;QAClB,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,iJAAgB,EAAC,KAAK,EAAE,EAAG,KAAK,OAAO,EAAE,KAAK,MAAM,EAAE;YAC3E,OAAO,IAAI,CAAC,CAAC,iBAAiB,EAAE,QAAQ;QAC1C,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;YACtC,kBAAkB;QACpB;IACF;IAEA,MAAM,cAAc,eAAe,KAAK,KAAK;IAC7C,MAAM,WAAW,KAAK,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC;IAE3D,qBACE,8OAAC,iIAAI;QAAC,WAAU;;0BACd,8OAAC,uIAAU;gBAAC,WAAU;;kCACpB,8OAAC,qIAAM;wBAAC,WAAU;kCAChB,cAAA,8OAAC,6IAAc;4BAAC,WAAW,GAAG,YAAY,qBAAqB,CAAC;sCAC7D;;;;;;;;;;;kCAGL,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CAAyB,KAAK,KAAK;;;;;;0CACnD,8OAAC;gCAAK,WAAU;0CACb,KAAK,SAAS,YAAY,OAAO,KAAK,SAAS,CAAC,kBAAkB,KAAK;;;;;;;;;;;;;;;;;;0BAI9E,8OAAC,wIAAW;gBAAC,WAAU;;kCACrB,8OAAC;wBAAE,WAAU;kCAA+C,KAAK,OAAO;;;;;;kCAExE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAK,WAAU;;kDAC1C,8OAAC,6MAAK;wCAAC,WAAU;;;;;;kDACjB,8OAAC;wCAAK,WAAU;kDAAW,KAAK,KAAK;;;;;;;;;;;;4BAGtC,KAAK,MAAM,KAAK,+BACf,8OAAC,qIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS;gCACT,UAAU;;kDAEV,8OAAC,yPAAiB;wCAAC,WAAU;;;;;;kDAC7B,8OAAC;wCAAK,WAAU;kDAAW,iBAAiB,eAAe;;;;;;;;;;;;0CAI/D,8OAAC,qIAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAK,WAAU;0CAC1C,cAAA,8OAAC,oNAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM9B"}},
    {"offset": {"line": 612, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,2JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,kHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,2KAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,iMAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 752, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\r\n  return (\r\n    <textarea\r\n      data-slot=\"textarea\"\r\n      className={cn(\r\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 776, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/app/actions/safety.ts"],"sourcesContent":["'use server'\r\n\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\r\n\r\nexport async function checkContentSafety(text: string): Promise<{ isSafe: boolean; error?: string }> {\r\n  if (!process.env.GEMINI_API_KEY) {\r\n    console.error(\"GEMINI_API_KEY is not set\");\r\n    return { isSafe: true }; // Fail open if key is missing, or handle as error\r\n  }\r\n\r\n  try {\r\n    const prompt = `Analyze this text for bullying, harassment, or severe toxicity. Respond ONLY with \"SAFE\" or \"UNSAFE\". Text: \"${text}\"`;\r\n    \r\n    let result;\r\n    try {\r\n        // Try the model available in your dashboard\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash\" });\r\n        result = await model.generateContent(prompt);\r\n    } catch (e: any) {\r\n        console.warn(\"Gemini 2.5 Flash failed, trying 1.5 Flash:\", e.message);\r\n        // Fallback to 1.5 just in case\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n        result = await model.generateContent(prompt);\r\n    }\r\n\r\n    const response = await result.response;\r\n    const textResponse = response.text().trim().toUpperCase();\r\n\r\n    if (textResponse.includes(\"SAFE\") && !textResponse.includes(\"UNSAFE\")) {\r\n      return { isSafe: true };\r\n    } else if (textResponse.includes(\"UNSAFE\")) {\r\n      return { isSafe: false };\r\n    } else {\r\n      // Fallback for unexpected responses\r\n      console.warn(\"Unexpected response from Gemini:\", textResponse);\r\n      return { isSafe: false, error: \"Unable to verify content safety.\" };\r\n    }\r\n  } catch (error: any) {\r\n    console.error(\"Error checking content safety:\", error);\r\n    return { isSafe: false, error: `Error checking content safety: ${error.message || error}` };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;IAMsB,qBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/components/thirdspace/create-post-modal.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { createPost } from \"@/lib/firebase/thirdspace\"\r\nimport { checkContentSafety } from \"@/app/actions/safety\"\r\nimport { Loader2, PenLine } from \"lucide-react\"\r\n\r\ninterface CreatePostModalProps {\r\n  userId: string\r\n  onPostCreated: () => void\r\n}\r\n\r\nexport function CreatePostModal({ userId, onPostCreated }: CreatePostModalProps) {\r\n  const [open, setOpen] = useState(false)\r\n  const [content, setContent] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [status, setStatus] = useState<\"idle\" | \"checking\" | \"posting\">(\"idle\")\r\n  const { toast } = useToast()\r\n\r\n  const handleSubmit = async () => {\r\n    if (!content.trim()) return\r\n\r\n    setLoading(true)\r\n    setStatus(\"checking\")\r\n    \r\n    try {\r\n      // 1. Check safety\r\n      const safetyResult = await checkContentSafety(content)\r\n      \r\n      if (!safetyResult.isSafe) {\r\n        toast({\r\n          title: \"Content Warning\",\r\n          description: safetyResult.error || \"This post was flagged as unsafe (bullying/harassment). Please revise.\",\r\n          variant: \"destructive\",\r\n        })\r\n        setLoading(false)\r\n        setStatus(\"idle\")\r\n        return\r\n      }\r\n\r\n      setStatus(\"posting\")\r\n      // 2. Create post if safe\r\n      await createPost(content, userId)\r\n      toast({\r\n        title: \"Post Created\",\r\n        description: \"Your voice has been heard.\",\r\n      })\r\n      setContent(\"\")\r\n      setOpen(false)\r\n      onPostCreated()\r\n    } catch (error) {\r\n      console.error(\"Error creating post:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to create post. Please try again.\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n      setStatus(\"idle\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button \r\n          size=\"lg\" \r\n          className=\"fixed bottom-6 right-6 h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 z-50\"\r\n        >\r\n          <PenLine className=\"h-6 w-6\" />\r\n          <span className=\"sr-only\">Speak Your Mind</span>\r\n        </Button>\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-[425px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>Speak Your Mind</DialogTitle>\r\n          <DialogDescription>\r\n            Share your thoughts anonymously. Your identity will be masked as a random alias.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        <div className=\"grid gap-4 py-4\">\r\n          <Textarea\r\n            placeholder=\"What's on your mind?\"\r\n            className=\"min-h-[150px] resize-none\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n          />\r\n        </div>\r\n        <DialogFooter>\r\n          <Button \r\n            onClick={handleSubmit} \r\n            disabled={!content.trim() || loading}\r\n            className=\"w-full\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                {status === \"checking\" ? \"Checking Safety...\" : \"Posting...\"}\r\n              </>\r\n            ) : (\r\n              \"Post Anonymously\"\r\n            )}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AASA;AACA;AACA;AACA;AACA;AAAA;AAjBA;;;;;;;;;;AAwBO,SAAS,gBAAgB,EAAE,MAAM,EAAE,aAAa,EAAwB;IAC7E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAkC;IACtE,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,iIAAQ;IAE1B,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,IAAI,IAAI;QAErB,WAAW;QACX,UAAU;QAEV,IAAI;YACF,kBAAkB;YAClB,MAAM,eAAe,MAAM,IAAA,4KAAkB,EAAC;YAE9C,IAAI,CAAC,aAAa,MAAM,EAAE;gBACxB,MAAM;oBACJ,OAAO;oBACP,aAAa,aAAa,KAAK,IAAI;oBACnC,SAAS;gBACX;gBACA,WAAW;gBACX,UAAU;gBACV;YACF;YAEA,UAAU;YACV,yBAAyB;YACzB,MAAM,IAAA,2IAAU,EAAC,SAAS;YAC1B,MAAM;gBACJ,OAAO;gBACP,aAAa;YACf;YACA,WAAW;YACX,QAAQ;YACR;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;QACF,SAAU;YACR,WAAW;YACX,UAAU;QACZ;IACF;IAEA,qBACE,8OAAC,qIAAM;QAAC,MAAM;QAAM,cAAc;;0BAChC,8OAAC,4IAAa;gBAAC,OAAO;0BACpB,cAAA,8OAAC,qIAAM;oBACL,MAAK;oBACL,WAAU;;sCAEV,8OAAC,uNAAO;4BAAC,WAAU;;;;;;sCACnB,8OAAC;4BAAK,WAAU;sCAAU;;;;;;;;;;;;;;;;;0BAG9B,8OAAC,4IAAa;gBAAC,WAAU;;kCACvB,8OAAC,2IAAY;;0CACX,8OAAC,0IAAW;0CAAC;;;;;;0CACb,8OAAC,gJAAiB;0CAAC;;;;;;;;;;;;kCAIrB,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,yIAAQ;4BACP,aAAY;4BACZ,WAAU;4BACV,OAAO;4BACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;kCAG9C,8OAAC,2IAAY;kCACX,cAAA,8OAAC,qIAAM;4BACL,SAAS;4BACT,UAAU,CAAC,QAAQ,IAAI,MAAM;4BAC7B,WAAU;sCAET,wBACC;;kDACE,8OAAC,4NAAO;wCAAC,WAAU;;;;;;oCAClB,WAAW,aAAa,uBAAuB;;+CAGlD;;;;;;;;;;;;;;;;;;;;;;;AAOd"}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/app/thirdspace/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useAuth } from \"@/components/auth/auth-provider\"\r\nimport { getPosts, type Post } from \"@/lib/firebase/thirdspace\"\r\nimport { PostCard } from \"@/components/thirdspace/post-card\"\r\nimport { CreatePostModal } from \"@/components/thirdspace/create-post-modal\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { ArrowLeft, Ghost, Loader2, MessageSquareLock } from \"lucide-react\"\r\nimport Link from \"next/link\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\n\r\nexport default function ThirdSpacePage() {\r\n  const { user, loading: authLoading } = useAuth()\r\n  const [posts, setPosts] = useState<Post[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const router = useRouter()\r\n  const { toast } = useToast()\r\n\r\n  useEffect(() => {\r\n    if (!authLoading && !user) {\r\n      router.push(\"/auth\")\r\n    }\r\n  }, [user, authLoading, router])\r\n\r\n  const loadPosts = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const fetchedPosts = await getPosts()\r\n      setPosts(fetchedPosts)\r\n    } catch (error) {\r\n      console.error(\"Error loading posts:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load the feed.\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      loadPosts()\r\n    }\r\n  }, [user])\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!user) return null\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-secondary/20 to-background pb-20\">\r\n      <header className=\"sticky top-0 z-40 w-full border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n        <div className=\"max-w-2xl mx-auto flex items-center justify-between h-16 px-4\">\r\n          <div className=\"flex items-center\">\r\n            <Button variant=\"ghost\" size=\"icon\" asChild className=\"mr-2\">\r\n              <Link href=\"/dashboard\">\r\n                <ArrowLeft className=\"h-5 w-5\" />\r\n              </Link>\r\n            </Button>\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"bg-purple-500/10 p-2 rounded-lg\">\r\n                <Ghost className=\"h-5 w-5 text-purple-500\" />\r\n              </div>\r\n              <h1 className=\"text-xl font-bold\">ThirdSpace</h1>\r\n            </div>\r\n          </div>\r\n          \r\n          <Button variant=\"ghost\" size=\"icon\" asChild>\r\n            <Link href=\"/thirdspace/inbox\">\r\n              <MessageSquareLock className=\"h-5 w-5\" />\r\n              <span className=\"sr-only\">Inbox</span>\r\n            </Link>\r\n          </Button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"max-w-2xl mx-auto px-4 py-6 space-y-6\">\r\n        <div className=\"space-y-2 text-center py-4\">\r\n          <h2 className=\"text-2xl font-bold tracking-tight\">The Anonymous Feed</h2>\r\n          <p className=\"text-muted-foreground\">\r\n            A safe space for students to share thoughts, confessions, and ideas without judgment.\r\n          </p>\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"flex justify-center py-12\">\r\n            <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n          </div>\r\n        ) : posts.length === 0 ? (\r\n          <div className=\"text-center py-12 space-y-4\">\r\n            <div className=\"bg-muted/50 rounded-full w-24 h-24 flex items-center justify-center mx-auto\">\r\n              <Ghost className=\"h-12 w-12 text-muted-foreground\" />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <h3 className=\"text-xl font-semibold\">It's quiet here...</h3>\r\n              <p className=\"text-muted-foreground\">Be the first to speak your mind.</p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {posts.map((post) => (\r\n              <PostCard key={post.id} post={post} currentUserId={user?.uid || \"\"} />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </main>\r\n\r\n      <CreatePostModal userId={user.uid} onPostCreated={loadPosts} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}