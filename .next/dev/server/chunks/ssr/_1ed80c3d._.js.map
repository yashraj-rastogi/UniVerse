{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/app/actions/safety.ts"],"sourcesContent":["'use server'\r\n\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\r\n\r\nexport async function checkContentSafety(text: string): Promise<{ isSafe: boolean; error?: string }> {\r\n  if (!process.env.GEMINI_API_KEY) {\r\n    console.error(\"GEMINI_API_KEY is not set\");\r\n    return { isSafe: true }; // Fail open if key is missing, or handle as error\r\n  }\r\n\r\n  try {\r\n    const prompt = `Analyze this text for bullying, harassment, or severe toxicity. Respond ONLY with \"SAFE\" or \"UNSAFE\". Text: \"${text}\"`;\r\n    \r\n    let result;\r\n    try {\r\n        // Try the model available in your dashboard\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash\" });\r\n        result = await model.generateContent(prompt);\r\n    } catch (e: any) {\r\n        console.warn(\"Gemini 2.5 Flash failed, trying 1.5 Flash:\", e.message);\r\n        // Fallback to 1.5 just in case\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n        result = await model.generateContent(prompt);\r\n    }\r\n\r\n    const response = await result.response;\r\n    const textResponse = response.text().trim().toUpperCase();\r\n\r\n    if (textResponse.includes(\"SAFE\") && !textResponse.includes(\"UNSAFE\")) {\r\n      return { isSafe: true };\r\n    } else if (textResponse.includes(\"UNSAFE\")) {\r\n      return { isSafe: false };\r\n    } else {\r\n      // Fallback for unexpected responses\r\n      console.warn(\"Unexpected response from Gemini:\", textResponse);\r\n      return { isSafe: false, error: \"Unable to verify content safety.\" };\r\n    }\r\n  } catch (error: any) {\r\n    console.error(\"Error checking content safety:\", error);\r\n    return { isSafe: false, error: `Error checking content safety: ${error.message || error}` };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;;AAEA,MAAM,QAAQ,IAAI,oLAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc,IAAI;AAE5D,eAAe,mBAAmB,IAAY;IACnD,IAAI,CAAC,QAAQ,GAAG,CAAC,cAAc,EAAE;QAC/B,QAAQ,KAAK,CAAC;QACd,OAAO;YAAE,QAAQ;QAAK,GAAG,kDAAkD;IAC7E;IAEA,IAAI;QACF,MAAM,SAAS,CAAC,6GAA6G,EAAE,KAAK,CAAC,CAAC;QAEtI,IAAI;QACJ,IAAI;YACA,4CAA4C;YAC5C,MAAM,QAAQ,MAAM,kBAAkB,CAAC;gBAAE,OAAO;YAAmB;YACnE,SAAS,MAAM,MAAM,eAAe,CAAC;QACzC,EAAE,OAAO,GAAQ;YACb,QAAQ,IAAI,CAAC,8CAA8C,EAAE,OAAO;YACpE,+BAA+B;YAC/B,MAAM,QAAQ,MAAM,kBAAkB,CAAC;gBAAE,OAAO;YAAmB;YACnE,SAAS,MAAM,MAAM,eAAe,CAAC;QACzC;QAEA,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,MAAM,eAAe,SAAS,IAAI,GAAG,IAAI,GAAG,WAAW;QAEvD,IAAI,aAAa,QAAQ,CAAC,WAAW,CAAC,aAAa,QAAQ,CAAC,WAAW;YACrE,OAAO;gBAAE,QAAQ;YAAK;QACxB,OAAO,IAAI,aAAa,QAAQ,CAAC,WAAW;YAC1C,OAAO;gBAAE,QAAQ;YAAM;QACzB,OAAO;YACL,oCAAoC;YACpC,QAAQ,IAAI,CAAC,oCAAoC;YACjD,OAAO;gBAAE,QAAQ;gBAAO,OAAO;YAAmC;QACpE;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO;YAAE,QAAQ;YAAO,OAAO,CAAC,+BAA+B,EAAE,MAAM,OAAO,IAAI,OAAO;QAAC;IAC5F;AACF;;;IArCsB;;AAAA,+OAAA"}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/.next-internal/server/app/thirdspace/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {checkContentSafety as '407076376327bc3d93dbafd4820581b0c8fce43ef4'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n"],"names":["registerServerReference"],"mappings":"AAAA,oDAAoD;;;+BAC3CA,2BAAAA;;;eAAAA,QAAAA,uBAAuB;;;wBAAQ","ignoreList":[0]}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@google/generative-ai/dist/index.mjs","sources":[],"sourcesContent":[],"names":[],"mappings":""}},
    {"offset": {"line": 1634, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yashraj%20Rastogi/OneDrive/Desktop/coderush/UniVerse/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts"],"sourcesContent":["// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n"],"names":["ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"AAAA,+EAA+E;AAC/E,yEAAyE;AACzE,iEAAiE;;;;+BACjDA,4BAAAA;;;eAAAA;;;AAAT,SAASA,yBAAyBC,OAAc;IACrD,IAAK,IAAIC,IAAI,GAAGA,IAAID,QAAQE,MAAM,EAAED,IAAK;QACvC,MAAME,SAASH,OAAO,CAACC,EAAE;QACzB,IAAI,OAAOE,WAAW,YAAY;YAChC,MAAM,OAAA,cAEL,CAFK,IAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,OAAO,uEAAuE,CAAC,GADhJ,qBAAA;uBAAA;4BAAA;8BAAA;YAEN;QACF;IACF;AACF","ignoreList":[0]}}]
}